# yum install -y https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm
sudo -s
yum install -y epel-release
yum install -y python-pip
pip install -U pip

S3 endpoint in VPC
Full Access - Allow access by any user or service within the VPC using credentials from any AWS accounts to any resources in this AWS service. All policies — IAM user policies, VPC endpoint policies, and AWS service-specific policies (e.g. Amazon S3 bucket policies, any S3 ACL policies) — must grant the necessary permissions for access to succeed.

AWS::IAM::Role
https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-templateexamples
Using an IAM Role to Grant Permissions to Applications Running on Amazon EC2 Instances 
https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2.html
Manage Credentials for Applications Running on Amazon EC2 Instances
https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-template-manage-creds

SSH to the instance and login as 'centos' using the key specified at launch. Additional information may be found at : http://wiki.centos.org/Cloud/AWS

https://docs.ansible.com/ansible/latest/modules/yum_module.html#notes
[centos@ip-172-31-1-5 yum]$ yum group list hidden ids | grep virtualization
Нет установленного файла групп.
Maybe run: yum groups mark convert (see man yum)
   Хост виртуализации (virtualization-host-environment)
   Гипервизор виртуализации (virtualization-hypervisor)
   Клиент виртуализации (virtualization-client)
   Платформа виртуализации (virtualization-platform)
   Средства виртуализации (virtualization-tools)

# "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/amazon-linux-ami-basics.html#amazon-linux-cloud-init"
# https://cloudinit.readthedocs.io/en/latest/topics/examples.html
# Upgrade the instance on first boot
package_upgrade: true
# Install additional packages on first boot
packages: 
# to access resources in AWS S3
- awscli
# we will use Ansible for futher installations
- ansible
# clone Ansible playbooks from GitHub
- git
# epel-release is a repository with python-pip
- epel-release
- python-pip
# Run arbitrary commands
runcmd:
- [pip install -U pip]

pip install awscli
aws s3 sync s3://juniper-vmx/test.txt .


